<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Uncommon Hacks 2017</title>
    <link rel="stylesheet" type="text/css" href="main.css">
    <script src="jquery-3.1.1.js"></script>
    <script>
        function initMap(){
            var styles = [
                    {
                        "featureType": "administrative",
                        "elementType": "labels.text.fill",
                        "stylers": [
                        {
                            "color": "#444444"
                        }
                        ]
                    },
                    {
                        "featureType": "landscape",
                        "elementType": "all",
                        "stylers": [
                        {
                            "color": "#63e897"
                        }
                        ]
                    },
                    {
                        "featureType": "poi",
                        "elementType": "all",
                        "stylers": [
                        {
                            "visibility": "off"
                        }
                        ]
                    },
                    {
                        "featureType": "road",
                        "elementType": "all",
                        "stylers": [
                        {
                            "saturation": -100
                        },
                        {
                            "lightness": 45
                        }
                        ]
                    },
                    {
                        "featureType": "road.highway",
                        "elementType": "all",
                        "stylers": [
                        {
                            "visibility": "simplified"
                        }
                        ]
                    },
                    {
                        "featureType": "road.arterial",
                        "elementType": "labels.icon",
                        "stylers": [
                        {
                            "visibility": "off"
                        }
                        ]
                    },
                    {
                        "featureType": "transit",
                        "elementType": "all",
                        "stylers": [
                        {
                            "visibility": "off"
                        }
                        ]
                    },
                    {
                        "featureType": "water",
                        "elementType": "all",
                        "stylers": [
                        {
                            "color": "#6490ff"
                        },
                        {
                            "visibility": "on"
                        }
                        ]
                    }
                ]

            var chicago = {lat: 41.8333925, lng: -87.8123333};
            var map = new google.maps.Map(document.getElementById("map"),{
                    mapTypeControlOptions: {
                        mapTypeIds: ['Styled']
                    },
                    zoom:10,
                    center:chicago,
                    disableDefaultUI: true,
                    mapTypeId: 'Styled'
                    
                });
            
            var speedcams = [];
            var redcams = [];
            var ds = new google.maps.DirectionsService;
            var dd = new google.maps.DirectionsRenderer;
            var styledMapType = new google.maps.StyledMapType(styles, { name: 'Styled' });
            map.mapTypes.set('Styled', styledMapType);
            dd.setMap(map);

            //creates speed camera markers
            $.getJSON("data/speed-cam-locations.json", function(json){
                var locs = json.data;
                for(var i=0;i<locs.length;i++){
                    var pos = {lat:parseFloat(locs[i][12]), lng:parseFloat(locs[i][13])};
                    var marker = new google.maps.Marker({
                        position:pos,
                        title:"Speed Camera"
                    });
                    speedcams.push(marker);
                }
            });
            //created red light camera markers
            $.getJSON("data/red-cam-location.json", function(json){
                var locs = json.data;
                for(var i=0;i<locs.length;i++){
                    var pos = {lat:parseFloat(locs[i][13]), lng:parseFloat(locs[i][14])};
                    var marker = new google.maps.Marker({
                        position:pos,
                        icon: "http://maps.google.com/mapfiles/ms/icons/blue-dot.png",
                        title:"Red Light Camera"
                    });
                    redcams.push(marker);
                }
            });

            //handling autocomplete
            var from = new google.maps.places.Autocomplete(document.getElementById("start-location"));
            var to = new google.maps.places.Autocomplete(document.getElementById("end-location"));
            var from_marker = new google.maps.Marker({
                title:"Origin"
            });
            var to_marker = new google.maps.Marker({
                title:"Destination"
                });
            var pathv = [from_marker, to_marker];
            var origin;
            var destination;

            from.bindTo("bounds", map);
            to.bindTo("bounds", map);
            from.setOptions({strictBounds: true});
            to.setOptions({strictBounds: true});            
            
            from.addListener('place_changed', function(){
                var place = from.getPlace();
                //clears out the start point
                from_marker.setMap(null);

                from_marker.setPosition(place.geometry.location);
                from_marker.setMap(map);
            });
            to.addListener('place_changed', function(){
                var place = to.getPlace();
                //clears out the start point
                to_marker.setMap(null);

                to_marker.setPosition(place.geometry.location);
                to_marker.setMap(map);
            });

            function geolocate() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(function(position) {
                        var geolocation = {
                          lat: position.coords.latitude,
                          lng: position.coords.longitude
                      };
                      var circle = new google.maps.Circle({
                          center: geolocation,
                          radius: position.coords.accuracy
                      });
                      autocomplete.setBounds(circle.getBounds());
                  });
                }
            }

            $("#myAnimation").on("click", function(){
            });
        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA2I74gM_d-BKNFw3mat6ziCeedygNfzic&libraries=places&callback=initMap"
         async defer></script>

</head>
<body>
    <h1>math.<b>floor(it)</b></h1>
    <div class="content">
        <div class="location-inputs sixty-container">
            <form-group>
                <label for="start-location">Start Point</label>
                <input id="start-location" type="text" placeholder="Start..." onFocus="geolocate()">
            </form-group>
            <form-group>
                <label for="end-location">End Point</label>
                <input id="end-location" type="text" placeholder="End...">
            </form-group>
        </div>
        <div class="forty-container">
            <div id="map"></div>
        </div>
        <div class="results sixty-container">

        </div>
    </div>
    <div id="myAnimation" onclick="myMove()">
        <img id="pic" src="car2.jpg" />
    </div>

    <script>
      function myMove() {
        var elem = document.getElementById("myAnimation");
        $(elem).addClass("clicked");

        //Change 
        $(".location-inputs").animate({
            width: 0,
            "padding-left": 0
        }, 1000, function() {
            // Animation complete.
        });
        $(".results").animate({
            width: "55%"
        }, 1000, function() {
            // Animation complete.
        });
      }
    </script>

      <!--<input id="car-animation" type="image" src="car1.jpg">-->
      <!--<input id="car-animation" type="button">-->
      <!--<button id="car-animation"><img src="car1.jpg"></button>
      <button id="animate-car" onclick="animateImage()"></button>
      <script language="javascript">
        function animateImage() {
          document.getElementById("animate-car").src == "car2.jpg") 
        }
      </script>-->
    
</body>
</html>